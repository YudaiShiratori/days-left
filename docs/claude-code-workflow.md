# Claude Code開発ワークフローガイド

このドキュメントでは、Claude Codeを使用した効率的な開発ワークフローについて説明します。

## 概要

Claude Codeは、GitHub IssueとPull Requestを中心とした開発ワークフローを自動化し、開発者の生産性を向上させるAIアシスタントです。このプロジェクトでは、**5つの核となるコマンド**で開発の全工程をカバーします：

- **Issue作成**: 問題や要望を明確にしてIssueを作成
- **Issue解決**: Issue駆動開発の完全ワークフロー
- **リファクタリング**: 既存コードの改善
- **PR作成**: 現在の変更からPull Requestを作成
- **PRレビュー**: 包括的なコードレビュー

## 開発フロー

### 1. Issue作成 (`/project:create-issue`)

構造化されたGitHub Issueを作成するためのガイドです。

**使用場面:**
- バグを発見した時
- 新機能のアイデアがある時
- ドキュメントの改善が必要な時
- 技術的な調査が必要な時

**提供される機能:**
- Issue種別の選択（Bug Report / Feature Request / Documentation）
- テンプレートベースの作成支援
- 適切なラベルとメタデータの設定
- 品質チェックリスト

### 2. Issue解決 (`/project:work-on-issue`)

Issue駆動開発の核となる、完全なワークフローガイドです。

**8つの開発フェーズ:**

#### Phase 1: Issue理解と計画
- Issue詳細の確認
- 関連作業の調査
- 自分への割り当て
- 進捗状況の更新

#### Phase 2: 環境セットアップ
- 開発環境の準備
- ブランチの作成
- 依存関係の確認

#### Phase 3: 調査と分析
- 問題の再現（バグの場合）
- コード調査
- 解決策の計画
- 調査結果のIssue更新

#### Phase 4: 実装
- コーディング標準に従った実装
- テストの作成・更新
- 定期的な進捗更新

#### Phase 5: 品質保証
- 全テストの実行
- 手動テスト
- セルフコードレビュー

#### Phase 6: ドキュメントと準備
- ドキュメントの更新
- コミットメッセージの作成
- PRの作成

#### Phase 7: レビューと反復
- レビュワーの設定
- フィードバックへの対応
- Issue状況の更新

#### Phase 8: マージ後の活動
- クリーンアップ
- モニタリング
- フォローアップ

### 3. リファクタリング (`/project:refactor-code`)

既存コードの改善と最適化をガイドします。

**使用場面:**
- コードの品質改善
- パフォーマンス最適化
- 技術的負債の解消
- アーキテクチャの改善

### 4. PR作成 (`/project:create-pr`)

現在の変更内容からPull Requestを作成します。

**提供される機能:**
- 現在の変更内容の分析
- 品質チェックの実行
- 構造化されたPR説明の生成
- メタデータの自動設定

### 5. PRレビュー (`/project:review-pr`)

効果的なコードレビューを支援します。

**レビュー観点:**
- コード品質とスタイル
- TypeScript型安全性
- React ベストプラクティス
- API設計（tRPC）
- テストカバレッジ
- セキュリティ
- パフォーマンス
- アクセシビリティ

## カスタムコマンド一覧（5つの核となるコマンド）

| コマンド | 用途 | 引数の例 | 使用タイミング |
|---------|------|---------|---------------|
| `/project:create-issue` | Issue作成 | `"login fails with special chars"` | 問題発見時、要望がある時 |
| `/project:work-on-issue` | Issue解決 | `123` | 開発作業の実行 |
| `/project:refactor-code` | リファクタリング | `"auth module"` | コード改善時 |
| `/project:create-pr` | PR作成 | `"Fix auth bug"` | 現在の変更をPRにする時 |
| `/project:review-pr` | PRレビュー | `456` | レビュー依頼時 |

## ベストプラクティス

### Issue管理
- **明確なタイトル**: 80文字以内で具体的に記述
- **詳細な説明**: 問題の背景、期待する結果、受け入れ基準を明記
- **適切なラベル**: 優先度、種別、担当領域を明確化
- **定期的な更新**: 進捗状況を関係者に共有

### コミット管理
- **Conventional Commits**: `type: description (fixes #123)` 形式を使用
- **小さなコミット**: 論理的に独立した変更単位でコミット
- **Issue参照**: 必ずIssue番号を含める
- **説明的メッセージ**: 変更の理由と内容を明記

### ブランチ管理
- **命名規則**: `fix/issue-123` または `feature/issue-456` 形式
- **最新状態の維持**: 定期的にmainブランチから更新
- **クリーンアップ**: マージ後は速やかにブランチを削除

### コードレビュー
- **建設的フィードバック**: 改善提案を具体的に記述
- **優先度の明示**: Critical/High/Medium/Lowで重要度を表示
- **迅速な対応**: レビュー依頼から24時間以内に初回レスポンス
- **学習の機会**: レビューを通じて知識共有を促進

## トラブルシューティング

### よくある問題と解決策

#### GitHub CLI認証エラー
```bash
# 再認証
gh auth logout
gh auth login
```

#### マージコンフリクト
```bash
# mainブランチから最新を取得してリベース
git checkout main
git pull origin main
git checkout feature-branch
git rebase main
```

#### CI失敗
```bash
# ローカルでテスト実行
bun run test
bun run type-check
bun run check

# 問題修正後にプッシュ
git add .
git commit -m "fix: resolve CI issues"
git push origin feature-branch
```

## 開発効率の測定

### KPI指標
- **Issue解決時間**: Issue作成からクローズまでの時間
- **PR作成頻度**: 定期的な小さなPRの作成
- **レビュー時間**: PRレビューの応答時間
- **コード品質**: 自動テストのカバレッジとパス率

### 改善ポイント
- Issue作成の品質向上
- 開発フェーズの効率化
- レビュープロセスの最適化
- 自動化の拡張

## まとめ

Claude Codeを使用したIssue駆動開発により、以下の効果が期待できます：

- **一貫した品質**: 構造化されたプロセスによる品質保証
- **効率的な開発**: 自動化による作業時間の短縮
- **明確な追跡**: Issue中心の進捗管理
- **チーム協力**: 標準化されたワークフローによる協力促進
- **継続的改善**: レビューとフィードバックによる改善サイクル

このワークフローを活用して、高品質なソフトウェア開発を実現してください。